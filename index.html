function createChart(canvasId, labels, data, color, mode = "auto") {

    const ctx = document.getElementById(canvasId).getContext("2d");

    return new Chart(ctx, {
        type: "line",
        data: {
            labels,
            datasets: [{
                data,
                borderColor: color,
                backgroundColor: color,
                tension: 0.35,
                pointRadius: 4,
                pointHoverRadius: 7,
                pointBackgroundColor: color,
                pointBorderColor: "#ffffff",
                pointBorderWidth: 2,
                spanGaps: false
            }]
        },
        options: {
            responsive: true,
            animation: false,

            scales: {
                x: {
                    ticks: {
                        // ⭐ Nur HEUTE ausdünnen
                        autoSkip: mode === "today",
                        maxTicksLimit: mode === "today" ? 12 : undefined,

                        // ⭐ Schriftgröße & Abstand
                        font: { size: 14 },
                        padding: 10,

                        // ⭐ Nur HEUTE drehen
                        maxRotation: mode === "today" ? 45 : 0,
                        minRotation: mode === "today" ? 20 : 0,

                        callback: function(value, index) {
                            let label = labels[index];

                            // ⭐ Monatstage hübsch formatieren
                            if (mode === "month" && /^\d{1,2}$/.test(label)) {
                                return label.toString().padStart(2, "0");
                            }

                            return label;
                        }
                    }
                },
                y: {
                    beginAtZero: false
                }
            },

            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: "#1c1c1e",
                    titleColor: "#fff",
                    bodyColor: "#fff",
                    borderColor: color,
                    borderWidth: 1
                }
            }
        }
    });
}
