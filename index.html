function createChart(canvasId, labels, data, color, mode = "auto") {

    const ctx = document.getElementById(canvasId).getContext("2d");

    return new Chart(ctx, {
        type: "line",
        data: {
            labels,
            datasets: [{
                data,
                borderColor: color,
                backgroundColor: color,
                tension: 0.35,
                pointRadius: mode === "today" ? 3 : 4,
                pointHoverRadius: 7,
                pointBackgroundColor: color,
                pointBorderColor: "#ffffff",
                pointBorderWidth: 2,
                spanGaps: false
            }]
        },
        options: {
            responsive: true,
            animation: false,

            scales: {
                x: {
                    ticks: {
                        // ⭐ Nur HEUTE ausdünnen
                        autoSkip: mode === "today",
                        maxTicksLimit: mode === "today" ? 10 : labels.length,

                        // ⭐ Schriftgröße & Abstand
                        font: { size: 14 },
                        padding: 12,

                        // ⭐ Nur HEUTE drehen
                        maxRotation: mode === "today" ? 45 : 0,
                        minRotation: mode === "today" ? 20 : 0,

                        // ⭐ History: Labels NICHT verändern
                        callback: function(value, index) {
                            return labels[index];
                        }
                    }
                },
                y: {
                    beginAtZero: false
                }
            },

            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: "#1c1c1e",
                    titleColor: "#fff",
                    bodyColor: "#fff",
                    borderColor: color,
                    borderWidth: 1
                }
            }
        }
    });
}
